<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gestión de Contactos</title>
  <style>
    /* Contact Card */
    .contact-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      background: #fff;
      box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.05);
    }

    .contact-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .contact-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 15px;
      border: 2px solid #007bff;
    }

    /* Flex para que footer quede abajo */
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
      flex-direction: column;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
    }

    body {
      padding: 20px;
      box-sizing: border-box;
    }


    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      flex: 1 0 auto;
      /* que crezca y ocupe espacio */
    }

    h1 {
      margin-bottom: 20px;
    }

    .btn {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
    }

    .btn-primary {
      background: #007bff;
      color: white;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-success {
      background: #28a745;
      color: white;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    /* Contact Card */
    .contact-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      background: #fff;
      box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.05);
    }

    .contact-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .contact-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 15px;
      border: 2px solid #007bff;
    }

    label {
      display: block;
      margin: 8px 0 4px;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"] {
      width: 100%;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    footer {
      flex-shrink: 0;
      /* No se encoge */
      background-color: #e9ebee;
      color: rgb(31, 29, 29);
      text-align: center;
      padding: 15px 20px;
      font-family: Arial, sans-serif;
      border-radius: 0 0 8px 8px;
      margin-top: 20px;
    }
  </style>
</head>

<body>



  <div class="container" id="contact-list-view">
    <h1>Lista de Contactos</h1>
    <button class="btn btn-success" id="btn-add-contact">Agregar Contacto</button>
    <div id="contacts-container"></div>
  </div>

  <div class="container" id="add-contact-view" style="display:none;">
    <h1>Agregar / Editar Contacto</h1>
    <form id="contact-form">
      <label for="full_name">Nombre completo</label>
      <input type="text" id="full_name" name="full_name" required />

      <label for="email">Email</label>
      <input type="email" id="email" name="email" required />

      <label for="phone">Teléfono</label>
      <input type="tel" id="phone" name="phone" />

      <label for="address">Dirección</label>
      <input type="text" id="address" name="address" />

      <div style="margin-top: 20px;">
        <button type="submit" class="btn btn-primary">Guardar</button>
        <button type="button" class="btn btn-secondary" id="btn-cancel">Cancelar</button>
      </div>
    </form>
  </div>

  <footer>
    &copy; 2025 Gestión de Contactos. Todos los derechos reservados.
  </footer>

  <script>
    // Contactos fijos (no se pueden borrar ni editar)
    const fixedContacts = [
      {
        full_name: "Juan Pérez",
        email: "juan@example.com",
        phone: "555-1234",
        address: "Calle Falsa 123",
        avatar: "https://randomuser.me/api/portraits/men/32.jpg",
      },
      {
        full_name: "María López",
        email: "maria.lopez@mail.com",
        phone: "555-5678",
        address: "Avenida Siempre Viva 742",
        avatar: "https://randomuser.me/api/portraits/women/45.jpg",
      },
    ];

    // Contactos de usuario almacenados y editables
    let userContacts = JSON.parse(localStorage.getItem("contacts")) || [];

    const btnAddContact = document.getElementById("btn-add-contact");
    const btnCancel = document.getElementById("btn-cancel");
    const contactListView = document.getElementById("contact-list-view");
    const addContactView = document.getElementById("add-contact-view");
    const contactForm = document.getElementById("contact-form");
    const contactsContainer = document.getElementById("contacts-container");

    let editIndex = null;

    // Guardar contactos de usuario en localStorage
    function saveContacts() {
      localStorage.setItem("contacts", JSON.stringify(userContacts));
    }

    // Renderizar contactos fijos + contactos usuario
    function renderContacts() {
      contactsContainer.innerHTML = "";

      // Mostrar contactos fijos (sin botones)
      fixedContacts.forEach((c) => {
        const card = document.createElement("div");
        card.classList.add("contact-card");
        card.innerHTML = `
          <div class="contact-header">
            <img class="contact-avatar" src="${c.avatar}" alt="Avatar ${c.full_name}" />
            <h3>${c.full_name}</h3>
          </div>
          <p><strong>Email:</strong> ${c.email}</p>
          <p><strong>Teléfono:</strong> ${c.phone}</p>
          <p><strong>Dirección:</strong> ${c.address}</p>
        `;
        contactsContainer.appendChild(card);
      });

      // Mostrar contactos del usuario (con botones)
      userContacts.forEach((c, i) => {
        const card = document.createElement("div");
        card.classList.add("contact-card");
        card.innerHTML = `
          <div class="contact-header">
            <img class="contact-avatar" src="${c.avatar || "https://randomuser.me/api/portraits/lego/1.jpg"}" alt="Avatar ${c.full_name}" />
            <h3>${c.full_name}</h3>
          </div>
          <p><strong>Email:</strong> ${c.email}</p>
          <p><strong>Teléfono:</strong> ${c.phone}</p>
          <p><strong>Dirección:</strong> ${c.address}</p>
          <button class="btn btn-primary btn-edit" data-index="${i}">Editar</button>
          <button class="btn btn-danger btn-delete" data-index="${i}">Eliminar</button>
        `;
        contactsContainer.appendChild(card);
      });

      // Eventos botones editar
      document.querySelectorAll(".btn-edit").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          editIndex = e.target.getAttribute("data-index");
          const c = userContacts[editIndex];
          contactForm.full_name.value = c.full_name;
          contactForm.email.value = c.email;
          contactForm.phone.value = c.phone;
          contactForm.address.value = c.address;
          contactListView.style.display = "none";
          addContactView.style.display = "block";
        });
      });

      // Eventos botones eliminar
      document.querySelectorAll(".btn-delete").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const idx = e.target.getAttribute("data-index");
          if (confirm("¿Seguro que quieres eliminar este contacto?")) {
            userContacts.splice(idx, 1);
            saveContacts();
            renderContacts();
          }
        });
      });
    }

    btnAddContact.addEventListener("click", () => {
      contactForm.reset();
      editIndex = null;
      contactListView.style.display = "none";
      addContactView.style.display = "block";
    });

    btnCancel.addEventListener("click", () => {
      addContactView.style.display = "none";
      contactListView.style.display = "block";
    });

    contactForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const newContact = {
        full_name: contactForm.full_name.value.trim(),
        email: contactForm.email.value.trim(),
        phone: contactForm.phone.value.trim(),
        address: contactForm.address.value.trim(),
        avatar: "",
      };

      if (editIndex !== null) {
        userContacts[editIndex] = newContact;
      } else {
        userContacts.push(newContact);
      }
      saveContacts();
      renderContacts();
      addContactView.style.display = "none";
      contactListView.style.display = "block";
    });

    renderContacts();
  </script>

</body>

</html>